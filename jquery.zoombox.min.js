/*!
	* Copyright Â© 2011 Legwork. All Rights Reserved.
	*
	* Dependencies:
	* jQuery 1.4+ (jquery.com)
	*
*/
(function(h){var j="1.2",k="#zoombox-container",e="zoombox-container",n="zoombox-close",o="zoomboxOptions",l="zoomboxState",i="zoomboxTarget";methods={init:function(p){return this.each(function(){var q=h(this),r=h.extend({},h.fn.zoombox.defaults,p);q.data(o,r).data(l,"closed").data(i,k+"-"+Math.floor(Math.random()*10000)+Math.floor(Math.random()*100));g(r,q)})},open:function(){return this.each(function(){var p=h(this);if(p.data(l)!="open"){p.click()}})},close:function(){return this.each(function(){var p=h(this);if(p.data(l)!="closed"){p.click()}})},destroy:function(){var p=arguments[1]?h(arguments[1]):h(k);return this.each(function(r){var q=h(this),s=q.data(o);if(r===0){a(q,s);q.data(o,{});p.remove()}})}};function g(q,p){p.bind("click.zoomboxEvents",function(r){r.preventDefault();if(p.data(l)=="closed"){m(p,r)}else{f(p,r)}});if(q.closeBtn===true){h(p.data(i)+" ."+n).live("click.zoomboxEvents",function(r){r.preventDefault();if(p.data(l)!="closed"){p.click()}})}if(q.closeWhenEsc===true){h(window).bind("keyup.zoomboxEvent",function(r){if(r.which==27){if(p.data(l)!="closed"){p.click()}}})}}function b(p){h(window).unbind(".zoomboxEvents")}function a(p,q){p.unbind(".zoomboxEvents");h("."+n).unbind(".zoomboxEvents");h(window).unbind(".zoomboxEvents")}function m(p,r){if(p.data(l)=="closed"){var t=p.data(o),q=c(t,p,r),s=h("<div/>").attr("id",d(p.data(i))).attr("class",e).css(t.containerCSSMap);function u(){h(p.data(i)).css("opacity","1").animate(q.animapGrow,t.speed,t.easing,function(){p.data(l,"open");if(t.closeBtn===true){h(p.data(i)+" ."+n).fadeIn()}if(t.closeIfNotSelf===true){h(window).bind("click.zoomboxEvents",b)}if(t.onOpened!==null){t.onOpened(r)}})}if(t.closeBtn===true){s.append('<a class="'+n+'" style="display: none;"/>')}h(t.containerParent).append(s);h(p.data(i)).css(q.startmap);if(t.preOpen!=null){t.preOpen(r)}u()}}function f(p,r){if(p.data(l)=="open"){var s=p.data(o),q=c(s,p);function t(){h(p.data(i)).animate(q.animapShrink,s.speed,s.easing,function(){p.data(l,"closed");h(p.data(i)).remove();p.removeData("zoomcalcs");if(s.onClosed!==null){s.onClosed(r)}})}if(s.closeBtn===true){h(p.data(i)+" ."+n).fadeOut("fast",function(){if(s.preClose!=null){s.preClose(r)}t()})}else{if(s.preClose!=null){s.preClose(r)}t()}}}function c(p,u){var x={},s={},r,v,t=(arguments[2]!==undefined)?arguments[2]:undefined;if(u.data("zoomcalcs")===undefined){if(p.growFromMouse===true){x.x=t.pageX;x.y=t.pageY}else{if(p.growTagAttr!==undefined){var w=h(t.currentTarget).attr(p.growTagAttr);var y=w.split(", ");x.x=y[0];x.y=y[1]}else{if(t!==undefined){var q=h(t.currentTarget).position();x.x=q.left;x.y=q.top}}}r=(p.targetPosX!==undefined)?p.targetPosX:x.x-parseInt(p.targetWidth/2,10);v=(p.targetPosY!==undefined)?p.targetPosY:x.y-parseInt(p.targetHeight/2,10);s.startmap={left:x.x+"px",top:x.y+"px"};s.animapGrow={left:r+"px",width:p.targetWidth,top:v+"px",height:p.targetHeight};s.animapShrink={left:x.x+"px",width:"1px",top:x.y+"px",height:"1px"};u.data("zoomcalcs",s)}else{s=u.data("zoomcalcs")}return s}function d(p){if(p.indexOf("#")==0||p.indexOf(".")==0){return p.slice(1)}else{return p}}h.fn.zoombox=function(p){if(methods[p]){return methods[p].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof p==="object"||!p){return methods.init.apply(this,arguments)}else{h.error("Method "+p+" does not exist on jquery.zoombox")}}};h.fn.zoombox.ver=function(){return j};h.fn.zoombox.defaults={containerCSSMap:{opacity:"0",width:"1px",height:"1px",position:"absolute"},containerParent:"body",closeBtn:true,closeWhenEsc:true,closeIfNotSelf:true,easing:"swing",growFromMouse:false,growTagAttr:undefined,onClosed:null,onOpened:null,preOpen:null,preClose:null,speed:"fast",targetHeight:"200",targetWidth:"200",targetPosX:undefined,targetPosY:undefined}})(jQuery);