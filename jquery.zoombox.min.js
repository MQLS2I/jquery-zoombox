/*!
	* Copyright Â© 2011 Legwork. All Rights Reserved.
	*
	* Dependencies:
	* jQuery 1.4+ (jquery.com)
	*
*/
(function(g){var h="1.1",d={init:function(j){return this.each(function(){var k=g(this),l=g.extend({},g.fn.zoombox.defaults,j);k.data("zoomboxOptions",l).data("zoomboxState","closed").data("zoomboxTarget",l.containerIdPre+"-"+Math.floor(Math.random()*10000)+Math.floor(Math.random()*100));f(l,k)})},open:function(j){g(j).click()},close:function(){return this.each(function(k){var j=g(this),l={};if(k===0){l=j.data("zoomboxOptions");e(j)}})},destroy:function(){var j=arguments[1]?g(arguments[1]):g(g.fn.zoombox.defaults.containerIdPre);return this.each(function(l){var k=g(this),m=k.data("zoomboxOptions");if(l===0){a(k,m);k.data("zoomboxOptions",{});j.remove()}})}};function f(k,j){j.bind("click.zoomboxEvents",function(l){l.preventDefault();if(j.data("zoomboxState")=="closed"){i(j,l)}else{e(j)}});if(k.containerCloseClass!==null){g(j.data("zoomboxTarget")+" "+k.containerCloseClass).live("click.zoomboxEvents",function(l){l.preventDefault();e(j)})}if(k.closeWhenEsc===true){g(window).bind("keyup.zoomboxEvent",function(l){if(l.which==27){e(j)}})}if(k.closeWhenSelfIsNotClicked===true){g(window).bind("click.zoomboxEvents",function(n){var m=false,l=g(n.target).parents();for(var o in l){if(l[o]===g(j.data("zoomboxTarget"))[0]){m=true}}if(m===false){e(j)}})}}function a(j,k){j.unbind(".zoomboxEvents");g(k.containerCloseClass).unbind(".zoomboxEvents");g(window).unbind(".zoomboxEvents")}function i(j,l){if(j.data("zoomboxState")=="closed"){var n=j.data("zoomboxOptions"),k=b(n,j,l),m=g("<div/>").attr("id",c(j.data("zoomboxTarget"))).attr("class",c(n.containerClass)).css(n.containerCSSMap);function o(){g(j.data("zoomboxTarget")).css("opacity","1").animate(k.animapGrow,n.zoomboxAnimationSpeed,n.zoomboxEasing,function(){j.data("zoomboxState","open");if(n.containerCloseClass!==null){g(j.data("zoomboxTarget")+" "+n.containerCloseClass).fadeIn()}if(n.openCallback!==null){n.openCallback(l)}})}if(n.containerCloseClass!==null){m.append('<a class="'+c(n.containerCloseClass)+'" style="display: none;"/>')}g(n.containerParent).append(m);g(j.data("zoomboxTarget")).css(k.startmap);if(n.preOpen!=null){n.preOpen(l)}o()}}function e(j){if(j.data("zoomboxState")=="open"){var l=j.data("zoomboxOptions"),k=b(l,j);function m(){g(j.data("zoomboxTarget")).animate(k.animapShrink,l.zoomboxAnimationSpeed,l.zoomboxEasing,function(){j.data("zoomboxState","closed");g(j.data("zoomboxTarget")).remove();j.removeData("zoomcalcs");if(l.closeCallback!==null){l.closeCallback()}})}if(l.containerCloseClass!==null){g(j.data("zoomboxTarget")+" "+l.containerCloseClass).fadeOut("fast",function(){if(l.preClose!=null){l.preClose()}m()})}else{if(l.preClose!=null){l.preClose()}m()}}}function b(j,o){var r={},m={},l,p,n=(arguments[2]!==undefined)?arguments[2]:undefined;if(o.data("zoomcalcs")===undefined){if(j.growFromMouse===true){r.x=n.pageX;r.y=n.pageY}else{if(j.growTagAttr!==undefined){var q=g(n.currentTarget).attr(j.growTagAttr);var s=q.split(", ");r.x=s[0];r.y=s[1]}else{if(n!==undefined){var k=g(n.currentTarget).position();r.x=k.left;r.y=k.top}}}l=(j.targetPosX!==undefined)?j.targetPosX:r.x-parseInt(j.targetWidth/2,10);p=(j.targetPosY!==undefined)?j.targetPosY:r.y-parseInt(j.targetHeight/2,10);m.startmap={left:r.x+"px",top:r.y+"px"};m.animapGrow={left:l+"px",width:j.targetWidth,top:p+"px",height:j.targetHeight};m.animapShrink={left:r.x+"px",width:"1px",top:r.y+"px",height:"1px"};o.data("zoomcalcs",m)}else{m=o.data("zoomcalcs")}return m}function c(j){if(j.indexOf("#")==0||j.indexOf(".")==0){return j.slice(1)}else{return j}}g.fn.zoombox=function(j){if(d[j]){return d[j].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof j==="object"||!j){return d.init.apply(this,arguments)}else{g.error("Method "+j+" does not exist on jquery.zoombox")}}};g.fn.zoombox.ver=function(){return h};g.fn.zoombox.defaults={containerIdPre:"#zoombox-container",containerClass:".zoombox-container",containerCloseClass:".zoombox-close",containerCSSMap:{opacity:"0",width:"1px",height:"1px",position:"absolute"},containerParent:"body",closeWhenEsc:true,closeWhenSelfIsNotClicked:true,closeCallback:null,growFromMouse:false,growTagAttr:undefined,openCallback:null,preOpen:null,preClose:null,targetHeight:"200",targetWidth:"200",targetPosX:undefined,targetPosY:undefined,zoomboxEasing:"swing",zoomboxAnimationSpeed:"fast"}})(jQuery);